<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="/css/style.css" type="text/css">
<script type="text/javascript" src="lib/jquery.js"></script>
<script type="text/javascript" src="lib/tg.js"></script>
<script type="text/javascript" src="lib/tabglutton.js"></script>
<script>
function tg_load() {
	chrome.tabs.getAllInWindow(null, function(tabs) {
		var list = $(".tg_tab_list");
		var i = 0;

		for (; i < tabs.length ; i++) {
			var li = $("<li>");
			$.data(li[0], "tabId", tabs[i].id);
			li.append(createActions(li));
			li.append(createLink(tabs[i].favIconUrl, tabs[i].title, tabs[i].url));
			li.append(createDescription(tabs[i].url));

			if (tabs[i].selected) {
				current = li;
				current.addClass("current");
			}

			li.click(function(e) {
				chrome.tabs.update($.data(this, "tabId"), { selected : true });
				current.removeClass("current");
				current = $(this).addClass("current");
			});

			//if (localStorage["showURL"] == "true" && localStorage["hoverURL"] == "true")
			var details = localStorage["showURL"] == "true" && localStorage["hoverURL"] == "true";
				li.hover(function() { showActions(this, details)}, function() { hideActions(this, details)});
			
			list.append(li);
		}
		$(".tg_content .tg_field").bind("keyup", function() {
			if (typing == null) {
				typing = setTimeout(refresh, TYPING_DELAY);
			}
			else {
				clearTimeout(typing);
				typing = setTimeout(refresh, TYPING_DELAY);
			}
		});
	});
	$(".tg_field")[0].focus();
}
</script>
<body onload="tg_load()" class="tabglutton">
<div class="tg_content">
<div class="tg_search">
<input class="tg_field">
</div>
<div class="scrollable" >
<ul class="tg_tab_list"></ul>
</div>
</div>
</body>
</html>
